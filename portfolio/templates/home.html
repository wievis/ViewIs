{% extends 'base.html' %}
{% load static %}
{% block title %}Portfolio | Computer Designer{% endblock %}

{% block extra_head %}
<style>
    .gallery { padding: 1rem; max-width: 1400px; margin: 0 auto; container-type: inline-size; }
    .media-item { margin-bottom: 10rem; cursor: pointer; overflow: hidden; transition: transform 0.3s ease; box-shadow: 0 1px 3px rgba(255,255,255,0.08); }
    .media-item:hover { transform: scale(1.002) rotateX(2deg); }
    .media-content img, .media-content video { width: 100%; height: auto; display: block; }
    .model-viewer { width: 100%; height: 600px; display: block; }
    @media (max-width: 768px) { .gallery { padding: 1.5rem; } .media-item { margin-bottom: 1.5rem; } .model-viewer { height: 400px; } }
</style>
{% endblock %}

{% block content %}
<div class="gallery">
    {% for item in media_items %}
    <div class="media-item" onclick="openLightbox({{ forloop.counter0 }})">
        <div class="media-content">
            {% if item.media_type == 'image' %}
                <img src="{{ item.file.url }}" alt="Portfolio item {{ forloop.counter }}" loading="lazy">
            {% elif item.media_type == 'video' %}
                <video src="{{ item.file.url }}" autoplay loop muted playsinline></video>
            {% elif item.media_type == 'model3d' %}
                <div class="model-viewer" data-model="{{ item.file.url }}" data-hdr="{% if item.hdr_setting %}{{ item.hdr_setting.file.url }}{% endif %}" data-index="{{ forloop.counter0 }}"></div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}